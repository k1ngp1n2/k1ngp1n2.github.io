{"version":3,"sources":["site.js"],"names":["SERVER_URL","userID","userAuthorization","citiesLoaded","lastCommentNumber","Container","id","className","htmlCode","prototype","render","remove","Error","$","e","console","error","message","text","dialog","title","Menu","my_id","my_class","my_items","call","items","Object","create","constructor","menuItems","document","createElement","item","NestedMenu","MenuItem","innerHTML","outerHTML","nestedMenuItems","href","itemName","querySelector","my_href","my_name","menuItem","Card","dataKey","src","dataTarget","cardItem","setAttribute","smallImg","Modal","alt","modalWindow","Button","buttonType","buttonName","createButton","FormField","element","name","fieldName","labelText","createField","createLabel","createP","FormButton","script","scriptOnClick","createFormButton","FormSelect","createSelect","option","attr","append","loadCities","select","ajax","url","dataType","success","data","testStatus","each","i","val","subject","status","statusText","showFlickrImages","img","number","flickrImages","getJSON","flickrResponse","forEach","photo","push","media","m","displayImages","imageIndex","hide","empty","fadeIn","setTimeout","length","httpGet","Promise","resolve","reject","xhr","XMLHttpRequest","onload","response","code","onerror","open","send","loadMenu","then","result","allItems","JSON","parse","temp","lvl","lvls","indexOf","replace","menu","getElementById","createGalleryControls","buttonNames","loadGallery","quantity","imgData","image","tagFilter","click","hasClass","button","show","filter","regExpOutput","edittingText","newEl","getElementsByClassName","template","RegExp","str","createForm","hideLabelsOnBlur","datepicker","validForTemplate","regexp","test","showError","container","errorMessage","classList","add","msgElem","appendChild","resetError","lastChild","removeChild","checkForm","form","elems","elements","parentNode","value","phone","email","effect","form_name","onblur","forms","callback","getElementsByTagName","style","display","form_birthday","top","form_phone","form_email","form_text","showCompanyInfo","createCommentPage","onClickShowBasket","getBasket","showCatalog","showGallery","showPromo","showNews","showHelp","tabControls","addClass","on","siblings","removeClass","closest","find","eq","index","btn_slide","slideToggle","toggleClass","createGallery","pageTemplate","createCarousel","loadCatalog","addAutomobiles","shooseItem","createCatalog","load","automobilesData","change","event","target","html","price","autoCatalog","autoShooserControl","addEventListener","preventDefault","onClickAddItemToBasket","user_id","responseJSON","createCommentForm","getComments","onClickSubmitNewComment","addNewComment","newComment","sendNewComment","showComments","commentsData","comments","comment_id","likes","eventObject","onClickDeleteComment","onClickLikeComment","commentID","commentNumber","type","hideComment","showNewLikeForComment","commentData","comment","showNewComment","consumerID","showBasket","basketData","cart","basket","product","Number","onClickDeleteItemFromBasket","product_id","messag","productID","fn","Carousel","options","settings","visible","rotateBy","speed","btnNext","btnPrev","auto","margin","position","dirAutoSlide","extend","$this","$carousel","children","itemWidth","outerWidth","itemHeight","outerHeight","itemsTotal","running","intID","size","css","slide","dir","direction","Indent","window","clearInterval","after","slice","clone","before","parseInt","animate_data","animate","queue","duration","complete","setInterval","jQuery","backslide"],"mappings":"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","file":"site.js","sourcesContent":["// Адрес сервера\r\nconst SERVER_URL = \"http://89.108.65.123:8080\";\r\n// id пользователя\r\nlet userID = \"\";\r\n// Авторизуем пользователя\r\nuserAuthorization();\r\n// Устанавливаем флаг необходимости загрузки списка населенных пунктов при первом открытии страницы с формой обратной связи\r\nlet citiesLoaded = false;\r\n// Номер последнего отображенного отзыва\r\nlet lastCommentNumber = 0;\r\n/** Абстрактный элемент страницы (суперкласс) */\r\nfunction Container() {\r\n    this.id = \"\";\r\n    this.className = \"\";\r\n    this.htmlCode = \"\";\r\n}\r\n/** Визуализирует элемент на странице\r\n * @return {String} html-код для встраивания в страницу */\r\nContainer.prototype.render = function() {\r\n    return this.htmlCode;\r\n};\r\n/** Удаляет контейнер по id */\r\nContainer.prototype.remove = function() {\r\n    try {\r\n        // бросаем исключение, если объект не имеет id\r\n        if (this.id === \"\") {\r\n            throw new Error(`Удаление элемента класса ${this.className} невозможно, т.к. элементу не присвоен id`);\r\n        }\r\n        // удаляем объект\r\n        $(\"#\" + this.id).remove();\r\n    }\r\n    catch (e) {\r\n        // выводим сообщение об ошибке\r\n        console.error(e.message);\r\n        $(\"<div>\").text(e.message).dialog({title:\"Ошибка удаления контейнера\"});\r\n    }\r\n}\r\n/** Класс Меню (подкласс класса Container)\r\n * @param my_id {String} id меню\r\n * @param my_class {String} класс меню\r\n * @param my_items {Array} разделы меню */\r\nfunction Menu(my_id, my_class, my_items) {\r\n    // Вызываем конструктор класса Container\r\n    Container.call(this);\r\n    // Сохраняем аргументы\r\n    this.id = my_id;\r\n    this.className = my_class;\r\n    this.items = my_items;\r\n}\r\n// Задаем в качестве прототипа класса Меню новый объект с прототипом объекта Container (расширяем класс Container)\r\nMenu.prototype = Object.create(Container.prototype);\r\nMenu.prototype.constructor = Menu;\r\n/** Визуализирует меню на странице\r\n * @return {String} html-код для встраивания в страницу\r\n * @override */\r\nMenu.prototype.render = function() {\r\n    let menuItems = document.createElement(\"ul\");\r\n    menuItems.className = this.className;\r\n    menuItems.id = this.id;\r\n    // Обходим все свойства объекта класса Меню\r\n    for (let item in this.items) {\r\n        // Обрабатываем все вложенные меню и пункты меню\r\n        if (this.items[item] instanceof NestedMenu || this.items[item] instanceof MenuItem) {\r\n            // Визуализируем вложенное меню или и пункт меню\r\n            menuItems.innerHTML += this.items[item].render();\r\n        }\r\n    }\r\n    return menuItems.outerHTML;\r\n};\r\n\r\n/** Класс Вложенное меню (подкласс класса Menu)\r\n * @param my_id {String} id вложенного меню\r\n * @param my_class {String} класс вложенного меню\r\n * @param my_items {Array} массив с разделами для вложенного подменю, первым элементом является заголовок меню */\r\nfunction NestedMenu(my_id, my_class, my_items) {\r\n    // Вызываем конструктор класса Menu\r\n    Menu.call(this, my_id, my_class, my_items);\r\n}\r\n// Задаем в качестве прототипа класса Вложенное меню новый объект с прототипом объекта Menu (расширяем класс Menu)\r\nNestedMenu.prototype = Object.create(Menu.prototype);\r\nNestedMenu.prototype.constructor = NestedMenu;\r\n/** Визуализирует вложенное меню на странице\r\n * @return {String} html-код для встраивания в страницу\r\n * @override */\r\nNestedMenu.prototype.render = function() {\r\n    let nestedMenuItems = document.createElement(\"li\");\r\n    nestedMenuItems.className = this.className;\r\n    nestedMenuItems.id = this.id;\r\n    nestedMenuItems.innerHTML = `<span onclick=\"${this.items[0].href}\">${this.items[0].itemName}</span><ul></ul>`;\r\n    // Обходим все свойства объекта класса Вложенное меню\r\n    for (let item in this.items) {\r\n        // Обрабатываем все вложенные меню и пункты вложенного меню\r\n        if (item > 0 && (this.items[item] instanceof MenuItem || this.items[item] instanceof NestedMenu)) {\r\n            nestedMenuItems.querySelector(\"ul\").innerHTML += this.items[item].render();\r\n        }\r\n    }\r\n    return nestedMenuItems.outerHTML;\r\n};\r\n/** Класс Пункт меню\r\n * @param my_href {String} ссылка на страницу сайта для перехода по клику на пункте меню\r\n * @param my_name {String} название пункта меню */\r\nfunction MenuItem(my_href, my_name) {\r\n    // Вызываем конструктор класса Container\r\n    Container.call(this);\r\n    this.className = \"menu-item\";\r\n    // Сохраняем аргументы\r\n    this.href = my_href;\r\n    this.itemName = my_name;\r\n}\r\n// Задаем в качестве прототипа класса Пункт меню новый объект с прототипом объекта Container (расширяем класс Container)\r\nMenuItem.prototype = Object.create(Container.prototype);\r\nMenuItem.prototype.constructor = MenuItem;\r\n/** Визуализирует пункт меню на странице\r\n * @return {String} html-код для встраивания в страницу\r\n * @override */\r\nMenuItem.prototype.render = function() {\r\n    let menuItem = document.createElement(\"li\");\r\n    menuItem.className = this.className;\r\n    menuItem.innerHTML = `<span onclick=\"${this.href}\">${this.itemName}</span>`;\r\n    return menuItem.outerHTML;\r\n};\r\n\r\n/** Класс Карточка (подкласс класса Container)\r\n * @param dataKey {String} ключ карточки\r\n * @param src {String} путь к изображению\r\n * @param dataTarget {String} id модального окна, появляющегося при нажатии на карточку */\r\nfunction Card(dataKey, src, dataTarget) {\r\n    // Вызываем конструктор класса Container\r\n    Container.call(this);\r\n    // Сохраняем аргументы\r\n    this.dataKey = dataKey;\r\n    this.src = src;\r\n    this.dataTarget = dataTarget;\r\n}\r\n// Задаем в качестве прототипа класса Меню новый объект с прототипом объекта Container (расширяем класс Container)\r\nCard.prototype = Object.create(Container.prototype);\r\nCard.prototype.constructor = Card;\r\n/** Визуализирует карточку на странице\r\n * @return {String} html-код для встраивания в страницу\r\n * @override */\r\nCard.prototype.render = function() {\r\n    let cardItem = document.createElement(\"div\");\r\n    cardItem.className = \"card\";\r\n    cardItem.setAttribute(\"data-key\", this.dataKey);\r\n    let smallImg = document.createElement(\"img\");\r\n    smallImg.className = \"card-img-top\";\r\n    smallImg.setAttribute(\"src\", this.src);\r\n    smallImg.setAttribute(\"alt\", this.dataKey);\r\n    smallImg.setAttribute(\"data-toggle\", \"modal\");\r\n    smallImg.setAttribute(\"data-target\", \"#\"+this.dataTarget);\r\n    cardItem.innerHTML += smallImg.outerHTML;\r\n    return cardItem.outerHTML;\r\n};\r\n/** Класс Модальное окно (подкласс класса Container)\r\n * @param id {String} id модального окна\r\n * @param src {String} путь к изображению\r\n * @param alt {String} название изображения, отображаемое, если оно не загружено */\r\nfunction Modal(id, src, alt) {\r\n    // Вызываем конструктор класса Container\r\n    Container.call(this);\r\n    // Сохраняем аргументы\r\n    this.id = id;\r\n    this.src = src;\r\n    this.alt = alt;\r\n}\r\n// Задаем в качестве прототипа класса Меню новый объект с прототипом объекта Container (расширяем класс Container)\r\nModal.prototype = Object.create(Container.prototype);\r\nModal.prototype.constructor = Modal;\r\n/** Визуализирует модальное окно на странице\r\n * @return {String} html-код для встраивания в страницу\r\n * @override */\r\nModal.prototype.render = function() {\r\n    let modalWindow = document.createElement(\"div\");\r\n    modalWindow.className = \"modal\";\r\n    modalWindow.id = this.id;\r\n    modalWindow.setAttribute(\"tabindex-key\", \"-1\");\r\n    modalWindow.setAttribute(\"role\", \"dialog\");\r\n    modalWindow.setAttribute(\"aria-hidden\", \"true\");\r\n    modalWindow.innerHTML = `<div class=\"modal-dialog modal-dialog-centered\" role=\"img\"><div class=\"modal-content\"><div class=\"modal-header\"><button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div><div class=\"modal-body\"><img class=\"img-fluid\" src=${this.src} alt=${this.alt}></div></div></div>`;\r\n    return modalWindow.outerHTML;\r\n};\r\n/** Класс Кнопка (подкласс класса Container)\r\n * @param buttonType {String} тип кнопки\r\n * @param buttonName {String} название кнопки */\r\nfunction Button (buttonType, buttonName) {\r\n    // Вызываем конструктор класса Container\r\n    Container.call(this);\r\n    // Сохраняем аргументы\r\n    this.className = `btn ${buttonType}`;\r\n    this.buttonName = buttonName;\r\n    if (buttonName == \"Все\")\r\n        this.className += \" active\";\r\n}\r\n// Задаем в качестве прототипа класса Кнопка новый объект с прототипом объекта Container (расширяем класс Container)\r\nButton.prototype = Object.create(Container.prototype);\r\nButton.prototype.constructor = Button;\r\n/** Визуализирует кнопку на странице\r\n * @return {String} html-код для встраивания в страницу\r\n * @override */\r\nButton.prototype.render = function() {\r\n    let createButton = document.createElement(\"button\");\r\n    createButton.className = this.className;\r\n    createButton.setAttribute(\"type\", \"button\");\r\n    createButton.innerHTML = this.buttonName;\r\n    return createButton.outerHTML;\r\n};\r\n/** Класс Текстовое поле формы\r\n * @param element {String} вид поля\r\n * @param id {String} id поля\r\n * @param name {String} имя поля\r\n * @param text {String} текст в поле */\r\nfunction FormField(element, id, name, text) {\r\n    // Вызываем конструктор класса Container\r\n    Container.call(this);\r\n    // Сохраняем аргументы\r\n    this.element = element;\r\n    this.id = id;\r\n    this.fieldName = name;\r\n    this.labelText = text;\r\n}\r\n// Задаем в качестве прототипа Поле новый объект с прототипом объекта Container (расширяем класс Container)\r\nFormField.prototype = Object.create(Container.prototype);\r\nFormField.prototype.constructor = FormField;\r\n/** Визуализирует Текстовое поле формы на странице\r\n * @return {String} html-код для встраивания в страницу\r\n * @override */\r\nFormField.prototype.render = function() {\r\n    let createField = document.createElement(this.element);\r\n    createField.id = this.id;\r\n    createField.setAttribute(\"type\", \"text\");\r\n    createField.setAttribute(\"name\", this.fieldName);\r\n    let createLabel = document.createElement(\"label\");\r\n    createLabel.setAttribute(\"for\", this.id);\r\n    createLabel.innerHTML = this.labelText;\r\n    let createP = document.createElement(\"p\");\r\n    createP.innerHTML = createField.outerHTML + createLabel.outerHTML;\r\n    return createP.outerHTML;\r\n};\r\n/** Класс Кнопка формы\r\n * @param id {String} id кнопки\r\n * @param name {String} текст на кнопке\r\n * @param script {String} скрипт, исполняемый при нажатии на кнопку */\r\nfunction FormButton(id, name, script) {\r\n    // Вызываем конструктор класса Container\r\n    Container.call(this);\r\n    // Сохраняем аргументы\r\n    this.id = id;\r\n    this.name = name;\r\n    this.scriptOnClick = script;\r\n}\r\n// Задаем в качестве прототипа Кнопка формы новый объект с прототипом объекта Container (расширяем класс Container)\r\nFormButton.prototype = Object.create(Container.prototype);\r\nFormButton.prototype.constructor = FormButton;\r\n/** Визуализирует Кнопку формы на странице\r\n * @return {String} html-код для встраивания в страницу\r\n * @override */\r\nFormButton.prototype.render = function() {\r\n    let createFormButton = document.createElement(\"input\");\r\n    createFormButton.id = this.id;\r\n    createFormButton.setAttribute(\"type\", \"button\");\r\n    createFormButton.setAttribute(\"value\", this.name);\r\n    createFormButton.setAttribute(\"onclick\", this.scriptOnClick);\r\n    return createFormButton.outerHTML;\r\n};\r\n /** Класс Селектор формы\r\n * @param id {String} id селекта */\r\nfunction FormSelect(id) {\r\n    // Вызываем конструктор класса Container\r\n    Container.call(this);\r\n     // Сохраняем аргументы\r\n     this.id = id;\r\n}\r\n// Задаем в качестве прототипа Селектор новый объект с прототипом объекта Container (расширяем класс Container)\r\nFormSelect.prototype = Object.create(Container.prototype);\r\nFormSelect.prototype.constructor = FormSelect;\r\n/** Визуализирует Селектор формы на странице\r\n * @return {String} html-код для встраивания в страницу\r\n * @override */\r\nFormSelect.prototype.render = function() {\r\n    let createSelect = document.createElement(\"select\");\r\n    createSelect.id = this.id;\r\n    let option = $(\"<option></option>\");\r\n    option.attr(\"value\", \"\");\r\n    option.attr(\"disabled\", \"disabled\");\r\n    option.attr(\"selected\", \"selected\");\r\n    option.text(\"--------- Укажите Ваш населенный пункт ---------\");\r\n    createSelect.append(option[0]);\r\n    return createSelect.outerHTML;\r\n};\r\n/** Подгружает наименования населенных пунктов в поле селект формы обратной связи\r\n * @param select селект, в который надо добавить наименования населенных пунктов */\r\nfunction loadCities(select) {\r\n    let option;\r\n    // Загружаем список городов\r\n    $.ajax({\r\n        url: \"help/cities.json\",\r\n        dataType: \"json\",\r\n        success: (data, testStatus) => {\r\n            try {\r\n                // Бросаем исключение, если загрузка не удалась\r\n                if (testStatus != \"success\") throw new Error(\"Список городов с сервера не получен из-за ошибки связи\");\r\n                // Добавляем названия населенных пунктов в поле селект формы\r\n                $.each(data, (i, val) => {\r\n                    option = $(\"<option></option>\");\r\n                    option.attr(\"value\", `${val.name} ${val.subject}`);\r\n                    option.text(`${val.name} ${val.subject}`);\r\n                    select.append(option[0]);\r\n                });\r\n            }\r\n            catch (e) {\r\n                // выводим сообщение об ошибке\r\n                console.error(e.message);\r\n                $(\"<div>\").text(e.status + \" \" + e.statusText).dialog({title:\"Ошибка связи\"});\r\n            }\r\n        },\r\n        error: error => {\r\n            console.error(error.status + \" \" + error.statusText);\r\n            $(\"<div>\").text(error.status + \" \" + error.statusText).dialog({title:\"Ошибка связи\"});\r\n        }\r\n    });\r\n}\r\n/** Отображает на странице изображения автомобилей с сайта Flickr */\r\nfunction showFlickrImages() {\r\n    // Фото\r\n    const url = \"https://api.flickr.com/services/feeds/photos_public.gne?\" +\r\n        \"tags=cars&format=json&jsoncallback=?\";\r\n    // создаем новый элемент jQuery для помещения в него изображения\r\n    let img;\r\n    // номер индекса первого отображаемого изображения в массиве\r\n    let number = 0;\r\n    // массив для хранения адресов изображений\r\n    let flickrImages = [];\r\n    /** С помощью функции .getJSON загружаем JSON-данные, находящиеся по указанному url-адресу (с сервера Flickr).\r\n     * Функция .getJSON сразу интерпретирует JSON, поэтому нет необходимости вызывать JSON.parse.\r\n     * В случае успешной загрузки данных выполняется заданная функция */\r\n    $.getJSON(url, function (flickrResponse) {\r\n        // Поочередно перебираем циклом все элементы JSON-массива items, получаемого с сервера Flickr\r\n        flickrResponse.items.forEach(function (photo) {\r\n            flickrImages.push(photo.media.m);\r\n        });\r\n    });\r\n    let displayImages = function(imageIndex) {\r\n        // Очищаем содержимое переменной для хранения изображения, сохраняем в ней элемент img и скрываем его с помощью функции .hide\r\n        img = $(\"<img>\").hide();\r\n        // С помощью функции .attr устанавливаем значение атрибута src элемента img, равным URL-адресу, хранящемуся в media.m JSON-ответа, полученного от Flickr (остальные полученные JSON-данные нам не нужны)\r\n        img.attr(\"src\", flickrImages[imageIndex]);\r\n        // прикрепляем элемент img к элементу класса .flickr\r\n        $(\".flickr\").empty().append(img);\r\n        // а затем отображаем его\r\n        img.fadeIn();\r\n        setTimeout(function () {\r\n            imageIndex++;\r\n            if (imageIndex === flickrImages.length)\r\n                imageIndex = 0;\r\n            displayImages(imageIndex);\r\n        }, 3000);\r\n    };\r\n    displayImages(number);\r\n}\r\n/** Возвращает Promise для ресурса, загружаемого по протоколу GET\r\n * @param url {String} адрес загружаемого ресурса\r\n * @return {Object} Promise */\r\nfunction httpGet(url) {\r\n    return new Promise(function(resolve, reject) {\r\n        // Создаём новый объект XMLHttpRequest\r\n        let xhr = new XMLHttpRequest();\r\n        // Создаем обработчик события успешного завершения запроса\r\n        xhr.onload = function() {\r\n            // Если код ответа сервера не 200, то это ошибка\r\n            if (this.status == 200) {\r\n                // Возвращаем ответ сервера\r\n                resolve(this.response);\r\n            } else {\r\n                // Выводим описание ошибки\r\n                let error = new Error(this.statusText);\r\n                // Сохраняем код ошибки\r\n                error.code = this.status;\r\n                reject(error);\r\n            }\r\n        };\r\n        // Создаем обработчик события неудачного завершения запроса\r\n        xhr.onerror = function() {\r\n            $(\"<div>\").text(\"Сетевая ошибка\").dialog({title:\"Ошибка связи\"});\r\n            reject(new Error(\"Сетевая ошибка\"));\r\n        };\r\n        // Инициализируем объект XMLHttpRequest и сохраняем аргументы для последующего использования методом send(): асинхронный GET-запрос на url\r\n        xhr.open(\"GET\", url);\r\n        // Открываем соединение и отсылаем запрос на сервер\r\n        xhr.send();\r\n    });\r\n}\r\n/** Загружает меню сайта */\r\nfunction loadMenu() {\r\n    /* JSON содержит информацию в следующем виде:\r\n    * первый элемент {Number} - максимальная глубина (уровень) вложенности меню\r\n    * элементы меню задаются двумя значениями - адрес для перехода и название пункта\r\n    * change_to_lvlN - команда перехода на другой уровень вложенности меню, где N - уровень, на который переходим\r\n    * create_lvlN - команда создания пункта меню уровня N, содержащего вложенное меню */\r\n    httpGet(\"menu.json\").then( result => {\r\n            // Преобразуем тело ответа в объект\r\n            const allItems = JSON.parse(result);\r\n            // Используем полученные данные для создания меню\r\n            let temp;\r\n            // Текущий уровень элементов меню (0 - главное меню)\r\n            let lvl = 0;\r\n            // Массивы для хранения пунктов меню для соответствующих уровней глубины вложенности меню\r\n            let lvls = [];\r\n            for (let i = 0; i < allItems[0]; i++) {\r\n                lvls[i] = [];\r\n            }\r\n            // Индекс первого элемента меню, хранящегося в полученном с сервера массива\r\n            let i = 1;\r\n            // Обрабатываем массив\r\n            while (i < allItems.length) {\r\n                temp = allItems[i];\r\n                // Проверяем является ли текущий элемент массива сведениями о пункте меню или командой переключения глубины вложенности либо создания пункта с вложенным меню\r\n                if (temp.indexOf(\"change_to_lvl\") == -1 && temp.indexOf(\"create_lvl\") == -1) {\r\n                    // Добавляем пункты меню на текущем уровне глубины вложенности меню\r\n                    lvls[lvl].push(new MenuItem(temp, allItems[i + 1]));\r\n                    // Переходим на следующий необработанный элемент массива\r\n                    i += 2;\r\n                } else {\r\n                    // Переключаемся на нужный уровень вложенности меню\r\n                    if (temp.indexOf(\"change_to_lvl\") != -1) {\r\n                        lvl = temp.replace(\"change_to_lvl\", \"\");\r\n                    } else {\r\n                        // Создаем пункт с вложенным меню заданного уровня вложенности меню\r\n                        if (temp.indexOf(\"create_lvl\") != -1) {\r\n                            temp = temp.replace(\"create_lvl\", \"\");\r\n                            lvls[temp - 1].push(new NestedMenu(\"nested-menu-id\" + i, \"nested-menu-class\", lvls[temp]));\r\n                            lvls[temp] = [];\r\n                        }\r\n                    }\r\n                    // Переходим на следующий необработанный элемент массива\r\n                    i++;\r\n                }\r\n            }\r\n            // Создаем главное меню\r\n            let menu = new Menu(\"menu-id\", \"menu-class\", lvls[0]);\r\n            // Визуализируем меню на странице сайта\r\n            document.getElementById(\"menu\").innerHTML = menu.render();\r\n        },\r\n        error => {\r\n            console.error(error);\r\n            $(\"<div>\").text(\"Ошибка удаления контейнера\").dialog({title:\"Ошибка удаления\"});\r\n        });\r\n}\r\n/** Создает элементы управления галереей */\r\nfunction createGalleryControls() {\r\n    // Названия кнопок\r\n    const buttonNames = [\"Все\", \"Aston Martin\", \"Audi quattro\", \"Audi R-8\", \"Ferrari\", \"Lamborghini\"];\r\n    for (let i = 0; i < buttonNames.length; i++) {\r\n        $(\".gallery_controls\").append(new Button(\"tag_filter\", buttonNames[i]).render());\r\n    }\r\n}\r\n/** Загружает галерею */\r\nfunction loadGallery() {\r\n    const quantity = 24;\r\n    for (let i = 0; i < quantity; i++) {\r\n        httpGet(`gallery/${i}.json`).then( result => {\r\n                let imgData = JSON.parse(result);\r\n                $(\".card-columns\").append(new Card(imgData.dataKey, imgData.image, imgData.id).render());\r\n                $(\".card-columns\").append(new Modal(imgData.id, imgData.src, imgData.dataKey).render());\r\n            },\r\n            error => {\r\n                console.error(error);\r\n                $(\"<div>\").text(error.status + \" \" + error.statusText).dialog({title:\"Ошибка связи\"});\r\n            });\r\n    }\r\n}\r\n/** Обработчик нажатий клавиш фильтрации фотографий по тегу */\r\nfunction tagFilter(){\r\n    /** Обработчик нажатий клавиш фильтрации фотографий по тегу */\r\n    $(\".tag_filter\").click(function(){\r\n        if ($(this).hasClass(\"active\")){\r\n            return;\r\n        }\r\n        $(\".tag_filter.active\").button(\"toggle\");\r\n        $(this).button(\"toggle\");\r\n        if ($(this).text() === \"Все\"){\r\n            $(\".card\").show(300);\r\n        } else {\r\n            $(\".card\").hide().filter(`[data-key=\"${$(this).text()}\"]`).show(300);\r\n        }\r\n    });\r\n}\r\n/** Обрабатывает по правилам русского языка кавычки в тексте с диалогами, заключенными в апострофы, со словами на русском и английском языках */\r\nfunction regExpOutput() {\r\n    let edittingText = `Анна сказала: 'Этим летом я буду отдыхать в Кот-д'Ивуар!'\r\n\r\n        Учитель неожиданно заметил: 'Время истекло'.\r\n\r\n        'Прямая речь'\r\n\r\n        'Поезд ушёл, — с грустью подумала девушка, — теперь уж точно опоздаю!'\r\n\r\n        'Что ж, поезд успел уйти, — с грустью подумал студент. – Теперь я точно не успею в институт!'.\r\n\r\n        Мужчина с грустью подумал: 'Электричка ушла, теперь я точно опоздаю', — и быстро побежал на автобусную остановку.\r\n\r\n        'Hello, friend!'\r\n\r\n        'test'\r\n\r\n        Test parents' aren't 'test test`;\r\n    let newEl = document.createElement(\"p\");\r\n    newEl.innerHTML = edittingText;\r\n    document.getElementsByClassName(\"reg_exp\")[0].append(newEl);\r\n    // Шаблон поддерживает текст на английском и русском языках\r\n    let template = new RegExp(\"('\\\\s')|^('[A-ZА-ЯЁ])|([^a-zA-ZА-яЁё]'[A-ZА-ЯЁ])|([^a-zA-ZА-яЁё]'[a-zA-ZА-яЁё]+'[^a-zA-ZА-яЁё])|('$)|('\\\\n)|(', —)|(' —)|('\\\\.)\", \"g\");\r\n    edittingText = edittingText.replace(template, (str) => {\r\n        // заменяем апострофы на кавычки\r\n        return str.replace(/'/g, \"\\\"\");\r\n    });\r\n    template = new RegExp(\"(\\\"[\\\\wа-яёА-ЯЁ])\", \"g\");\r\n    edittingText = edittingText.replace(template, (str) => {\r\n        // заменяем апострофы на кавычки\r\n        return str.replace(/\"/, \"«\");\r\n    });\r\n    template = new RegExp(\"\\\"\", \"g\");\r\n    edittingText = edittingText.replace(template, \"»\");\r\n    newEl = document.createElement(\"p\");\r\n    newEl.innerHTML = edittingText;\r\n    document.getElementsByClassName(\"reg_exp\")[0].append(newEl);\r\n}\r\n/** Создает форму обратной связи */\r\nfunction createForm() {\r\n    $(\"#call_back\").append(new FormField(\"input\", \"form_name\", \"name\", \"Имя\").render());\r\n    $(\"#call_back\").append(new FormField(\"input\", \"form_birthday\", \"birthday\", \"Дата рождения\").render());\r\n    $(\"#call_back\").append(new FormField(\"input\", \"form_phone\", \"phone\", \"Телефон\").render());\r\n    $(\"#call_back\").append(new FormField(\"input\", \"form_email\", \"email\", \"e-mail\").render());\r\n    $(\"#call_back\").append(new FormField(\"textarea\", \"form_text\", \"message\", \"Сообщение\").render());\r\n    $(\"#call_back\").append(new FormSelect(\"cities\").render());\r\n    $(\"#call_back\").append(new FormButton(\"form_submit\", \"Отправить\", \"checkForm(this.form)\").render());\r\n    // Убираем labels, если в поле ввода формы введен какой-то текст\r\n    hideLabelsOnBlur();\r\n    $(\"#form_birthday\").datepicker();\r\n}\r\n/** Проверяет строку на соответствие шаблону\r\n * @param str {String} проверяемая строка\r\n * @param regexp {String} регулярное выражение, используемое для проверки\r\n * @return {Boolean} true, если соответствует, иначе false */\r\nfunction validForTemplate(str, regexp) {\r\n    return regexp.test(str);\r\n}\r\n/** Визуализирует сообщение об ошибке\r\n * @param container {Object}, в который будет выведено сообщение об ошибке\r\n * @param errorMessage {String} сообщение об ошибке */\r\nfunction showError(container, errorMessage) {\r\n    // Меняем стиль отображения контейнера, отображающего ошибку\r\n    container.classList.add(\"error\");\r\n    // Создаем элемент для отображения сообщения об ошибке\r\n    let msgElem = document.createElement(\"span\");\r\n    msgElem.classList.add(\"error-message\");\r\n    msgElem.innerHTML = errorMessage;\r\n    // Визуализируем текст сообщения об ошибке\r\n    container.appendChild(msgElem);\r\n}\r\n/** Удаляет сообщение об ошибке\r\n * @param container {Object}, в котором надо удалить сообщение об ошибке */\r\nfunction resetError(container) {\r\n    // Меняем стиль отображения контейнера, отображавшего ошибку\r\n    container.classList.remove(\"error\");\r\n    if (container.lastChild.className == \"error-message\") {\r\n        // Удаляем сообщение об ошибке\r\n        container.removeChild(container.lastChild);\r\n    }\r\n}\r\n/** Обрабатывает отправку данных из формы */\r\nfunction checkForm(form) {\r\n    // Получаем элементы формы\r\n    let elems = form.elements;\r\n    // Удаляем сообщение об ошибке заполнения поля с именем пользователя\r\n    resetError(elems.name.parentNode);\r\n    // Если поле с именем пользователя заполнено неверно\r\n    if (!validForTemplate(elems.name.value, /^[а-яёА-ЯЁ]+$/)) {\r\n        // то выводим сообщение об ошибке\r\n        showError(elems.name.parentNode, \"Имя может состоять только из русских букв\");\r\n    }\r\n    // Обработка поля с телефоном пользователя\r\n    resetError(elems.phone.parentNode);\r\n    if (!validForTemplate(elems.phone.value, /^\\+\\d\\(\\d{3}\\)\\d{3}-\\d{4}$/)) {\r\n        showError(elems.phone.parentNode, \"Введите номер телефона в формате +7(000)000-0000\");\r\n    }\r\n    // Обработка поля с почтовым адресом пользователя\r\n    resetError(elems.email.parentNode);\r\n    if (!validForTemplate(elems.email.value, /^(\\w+)((\\.\\w+)|(-\\w+))?(@[a-z_]+\\.[a-z]{2,6})$/)) {\r\n        showError(elems.email.parentNode, \"Недопустимый адрес электронной почты\");\r\n    }\r\n    // Обработка поля с сообщением пользователя\r\n    resetError(elems.message.parentNode);\r\n    if (validForTemplate(elems.message.value, /^$/)) {\r\n        showError(elems.message.parentNode, \"Оставьте ваше сообщение\");\r\n    }\r\n    $(\".error-message\").effect(\"slide\", 3000);\r\n}\r\n/** Убирает labels, если в поле ввода формы введены символы */\r\nfunction hideLabelsOnBlur() {\r\n    // Обработчик события потери фокуса на поле form_name\r\n    form_name.onblur = () => {\r\n        // если в поле имеются символы\r\n        if (form_name.value !== \"\")\r\n            // то скрываем label\r\n            document.forms.callback.name.parentNode.getElementsByTagName(\"label\")[0].style.display = \"none\";\r\n        else\r\n            // иначе отображаем label\r\n            document.forms.callback.name.parentNode.getElementsByTagName(\"label\")[0].style.display = \"\";\r\n    };\r\n    // Обработчик события потери фокуса на поле form_birthday\r\n    form_birthday.onblur = () => {\r\n        $(\"#form_birthday + label\")[0].style.top = \"8.5em\";\r\n    };\r\n    // Обработчик события потери фокуса на поле form_phone\r\n    form_phone.onblur = () => {\r\n        if (form_phone.value !== \"\")\r\n            document.forms.callback.phone.parentNode.getElementsByTagName(\"label\")[0].style.display = \"none\";\r\n        else\r\n            document.forms.callback.phone.parentNode.getElementsByTagName(\"label\")[0].style.display = \"\";\r\n    };\r\n    // Обработчик события потери фокуса на поле form_email\r\n    form_email.onblur = () => {\r\n        if (form_email.value !== \"\")\r\n            document.forms.callback.email.parentNode.getElementsByTagName(\"label\")[0].style.display = \"none\";\r\n        else\r\n            document.forms.callback.email.parentNode.getElementsByTagName(\"label\")[0].style.display = \"\";\r\n    };\r\n    // Обработчик события потери фокуса на поле form_text\r\n    form_text.onblur = () => {\r\n        if (form_text.value !== \"\")\r\n            document.forms.callback.message.parentNode.getElementsByTagName(\"label\")[0].style.display = \"none\";\r\n        else\r\n            document.forms.callback.message.parentNode.getElementsByTagName(\"label\")[0].style.display = \"\";\r\n    };\r\n}\r\n/** Включает отображение раздела о компании */\r\nfunction showCompanyInfo() {\r\n    if (document.querySelector(\"#company\").style.display === \"\") {\r\n        // Создаем страницу с отзывами\r\n        createCommentPage();\r\n        document.querySelector(\"#cart\").style.display = \"\";\r\n        document.querySelector(\"#catalog\").style.display = \"\";\r\n        document.querySelector(\"#photo_gallery\").style.display = \"\";\r\n        document.querySelector(\"#tabs\").style.display = \"\";\r\n        document.querySelector(\"#reg_exp\").style.display = \"\";\r\n        document.querySelector(\"#company\").style.display = \"block\";\r\n        document.querySelector(\"#call_back\").style.display = \"\";\r\n    }\r\n}\r\n/** Включает отображение корзины */\r\nfunction onClickShowBasket() {\r\n    if (document.querySelector(\"#cart\").style.display === \"\") {\r\n        // Получаем содержимое корзины с сервера\r\n        getBasket(userID);\r\n        document.querySelector(\"#cart\").style.display = \"block\";\r\n        document.querySelector(\"#catalog\").style.display = \"\";\r\n        document.querySelector(\"#photo_gallery\").style.display = \"\";\r\n        document.querySelector(\"#tabs\").style.display = \"\";\r\n        document.querySelector(\"#reg_exp\").style.display = \"\";\r\n        document.querySelector(\"#company\").style.display = \"\";\r\n        document.querySelector(\"#call_back\").style.display = \"\";\r\n    }\r\n}\r\n/** Включает отображение раздела каталог */\r\nfunction showCatalog() {\r\n    if (document.querySelector(\"#catalog\").style.display === \"\") {\r\n        document.querySelector(\"#cart\").style.display = \"\";\r\n        document.querySelector(\"#catalog\").style.display = \"block\";\r\n        document.querySelector(\"#photo_gallery\").style.display = \"\";\r\n        document.querySelector(\"#tabs\").style.display = \"\";\r\n        document.querySelector(\"#reg_exp\").style.display = \"\";\r\n        document.querySelector(\"#company\").style.display = \"\";\r\n        document.querySelector(\"#call_back\").style.display = \"\";\r\n    }\r\n}\r\n/** Включает отображение раздела фотогалереи */\r\nfunction showGallery() {\r\n    if (document.querySelector(\"#photo_gallery\").style.display === \"\") {\r\n        document.querySelector(\"#cart\").style.display = \"\";\r\n        document.querySelector(\"#catalog\").style.display = \"\";\r\n        document.querySelector(\"#photo_gallery\").style.display = \"block\";\r\n        document.querySelector(\"#tabs\").style.display = \"\";\r\n        document.querySelector(\"#reg_exp\").style.display = \"\";\r\n        document.querySelector(\"#company\").style.display = \"\";\r\n        document.querySelector(\"#call_back\").style.display = \"\";\r\n    }\r\n}\r\n/** Включает отображение раздела промоакций */\r\nfunction showPromo() {\r\n    if (document.querySelector(\"#tabs\").style.display === \"\") {\r\n        document.querySelector(\"#cart\").style.display = \"\";\r\n        document.querySelector(\"#catalog\").style.display = \"\";\r\n        document.querySelector(\"#photo_gallery\").style.display = \"\";\r\n        document.querySelector(\"#tabs\").style.display = \"block\";\r\n        document.querySelector(\"#reg_exp\").style.display = \"\";\r\n        document.querySelector(\"#company\").style.display = \"\";\r\n        document.querySelector(\"#call_back\").style.display = \"\";\r\n    }\r\n}\r\n/** Включает отображение раздела новостей */\r\nfunction showNews() {\r\n    if (document.querySelector(\"#reg_exp\").style.display === \"\") {\r\n        document.querySelector(\"#cart\").style.display = \"\";\r\n        document.querySelector(\"#catalog\").style.display = \"\";\r\n        document.querySelector(\"#tabs\").style.display = \"\";\r\n        document.querySelector(\"#photo_gallery\").style.display = \"\";\r\n        document.querySelector(\"#reg_exp\").style.display = \"block\";\r\n        document.querySelector(\"#company\").style.display = \"\";\r\n        document.querySelector(\"#call_back\").style.display = \"\";\r\n    }\r\n}\r\n/** Включает отображение раздела помощи */\r\nfunction showHelp() {\r\n    if (document.querySelector(\"#call_back\").style.display === \"\") {\r\n        document.querySelector(\"#cart\").style.display = \"\";\r\n        document.querySelector(\"#catalog\").style.display = \"\";\r\n        document.querySelector(\"#tabs\").style.display = \"\";\r\n        document.querySelector(\"#photo_gallery\").style.display = \"\";\r\n        document.querySelector(\"#reg_exp\").style.display = \"\";\r\n        document.querySelector(\"#company\").style.display = \"\";\r\n        document.querySelector(\"#call_back\").style.display = \"block\";\r\n        if (!citiesLoaded) {\r\n            // Подгружаем наименования населенных пунктов в поле селект формы обратной связи\r\n            loadCities($(\"#cities\")[0]);\r\n            // Список населенных пунктов загружен\r\n            citiesLoaded = true;\r\n        }\r\n    }\r\n}\r\n/** Предоставляет управление вкладками */\r\nfunction tabControls() {\r\n    // По умолчанию открываем первую вкладку\r\n    $(\".tab_controls li:first\").addClass(\"opened_tab\");\r\n    // Отображаем первый div\r\n    $(\".tabs div:first\").addClass(\"opened\");\r\n    // Остальные div соответствуют другим вкладкам - скрываем их\r\n    $(\".tabs div:not(:first)\").hide();\r\n    // Добавляем обработчик щелчков по вкладкам\r\n    // Если щелчок по закрытой вкладке\r\n    $(\"ul.tab_controls\").on(\"click\", \"li:not(.opened_tab)\", function() {\r\n        // то применяем к ней класс opened_tab\r\n        $(this).addClass(\"opened_tab\")\r\n            // у остальных вкладок удаляем этот класс\r\n            .siblings().removeClass(\"opened_tab\")\r\n            // удаляем класс opened у всех div вкладок\r\n            .closest(\"div.tabs\").find(\"div.tab_info\").removeClass(\"opened\").hide()\r\n            // применяем класс opened к div, имеющим тот же порядковый номер, что и вкладка\r\n            .eq($(this).index()).addClass(\"opened\").show();\r\n    });\r\n}\r\n/** Управляет визуализацией подсказки */\r\nfunction btn_slide() {\r\n    $(\"#helper\").slideToggle(\"slow\");\r\n    $(\"p .slide\").toggleClass(\"active\");\r\n}\r\n/** Создает фотогалерею */\r\nfunction createGallery() {\r\n    // Создаем элементы управления галереей\r\n    createGalleryControls();\r\n    // Загружаем изображения для галереи\r\n    loadGallery();\r\n    // Подключаем обработчик щелчков по кнопкам галереи\r\n    tagFilter();\r\n}\r\n/** Создает элементы, отображаемые на каждой странице */\r\nfunction pageTemplate() {\r\n    // Загружаем меню\r\n    loadMenu();\r\n    // Загружаем изображения с Flickr\r\n    showFlickrImages();\r\n    // Отображаем карусель\r\n    createCarousel();\r\n    // Скрываем подсказку вверху страницы\r\n    $(\"#helper\").hide();\r\n}\r\n/** Загружает названия и цены автомобилей */\r\nfunction loadCatalog() {\r\n    // Загружаем описания автомобилей\r\n    $.ajax({\r\n        url: \"catalogue/autoDetails.json\",\r\n        dataType: \"json\",\r\n        success: (data, testStatus) => {\r\n            try {\r\n                // Бросаем исключение, если загрузка не удалась\r\n                if (testStatus != \"success\") throw new Error(\"Сведения об автомобилях с сервера не получены из-за ошибки связи\");\r\n                // Добавляем названия автомобилей в поле селект формы\r\n                addAutomobiles(data);\r\n                // Добавляем обработчик щелчков по товарам в списке каталога\r\n                shooseItem(data);\r\n            }\r\n            catch (e) {\r\n                // выводим сообщение об ошибке\r\n                console.error(e.message);\r\n                $(\"<div>\").text(e.status + \" \" + e.statusText).dialog({title:\"Ошибка связи\"});\r\n            }\r\n        },\r\n        error: error => {\r\n            console.error(error);\r\n            $('<div>').text(error.status + ' ' + error.statusText).dialog({title:'Ошибка связи'});\r\n        }\r\n    });\r\n}\r\n/** Создает форму с каталогом автомобилей */\r\nfunction createCatalog() {\r\n    // Загружаем наименования автомобилей в селект формы каталога\r\n    $('#autoShooserControl').load('catalogue/autoOptions.json');\r\n    // Загружаем названия и цены автомобилей\r\n    loadCatalog();\r\n}\r\n/** Добавляет обработчик щелчков по названиям автомобилей в поле селект формы\r\n * @param automobilesData {Object} json-данные об автомобилях */\r\nfunction addAutomobiles(automobilesData) {\r\n    $('#autoShooserControl').change( event => {\r\n        // Убираем опцию с подсказкой\r\n        $('[value=\"\"]', event.target).remove();\r\n        // Сохраняем номер выбранной опции\r\n        let val = $(event.target).val();\r\n        // Отображаем описание автомобиля\r\n        $('#autoDetailPane').html(`<p>Название автомобиля ${automobilesData[val].name}</p><p>Цена автомобиля ${automobilesData[val].price} рублей</p>`);\r\n    });\r\n}\r\n/** Добавляет обработчик для добавления товара в корзину */\r\nfunction shooseItem(automobilesData) {\r\n    let autoCatalog = document.querySelector('#autoCatalog');\r\n    let autoShooserControl = document.querySelector('#autoShooserControl');\r\n    // Добавляем обработчик событий отправки при нажатии на товар в списке каталога\r\n    autoCatalog.addEventListener('submit', (event) => {\r\n        event.preventDefault();\r\n        onClickAddItemToBasket(automobilesData[autoShooserControl.value].name, automobilesData[autoShooserControl.value].price);\r\n    });\r\n}\r\n/** Авторизирует пользователя */\r\nfunction userAuthorization() {\r\n    $.ajax({\r\n        url: `${SERVER_URL}/shop`,\r\n        data: {'user_id': userID},\r\n        dataType: 'json',\r\n        success: (data, testStatus) => {\r\n            try {\r\n                // Бросаем исключение, если загрузка не удалась\r\n                if (testStatus != 'success') throw new Error('id пользователя с сервера не получено из-за ошибки связи');\r\n                // Сохраняем id пользователя\r\n                userID = data.user_id;\r\n            }\r\n            catch (e) {\r\n                // выводим сообщение об ошибке\r\n                console.error(e.message);\r\n                $('<div>').text(e.status + ' ' + e.responseJSON.message).dialog({title:'Ошибка связи'});\r\n            }\r\n        },\r\n        error: error => {\r\n            console.error(`${error.status} ${error.responseJSON.message}`);\r\n            $('<div>').text(error.status + ' ' + error.responseJSON.message).dialog({title:'Ошибка связи'});\r\n        }\r\n    });\r\n}\r\n/** Создает страницу с отзывами о магазине */\r\nfunction createCommentPage() {\r\n    // Добавляем форму для отправки отзывов\r\n    createCommentForm();\r\n    // Получаем все отзывы с сервера\r\n    getComments();\r\n    // Добавлем обработчик отправки отзывов на сервер\r\n    onClickSubmitNewComment();\r\n}\r\n/** Добавляет форму для отправки отзыва */\r\nfunction createCommentForm() {\r\n    // Добавляет форму для отправки отзывов\r\n    $('#company').html(`<form id=\"add_new_comment\"><label for=\"new_comment\">Что Вы думаете о нашем магазине?</label><input id=\"new_comment\"><input class=\"btn\" id=\"send_comment\" type=\"submit\" value=\"Отправить отзыв\"></form>`);\r\n}\r\n/** Добавлет обработчик отправки отзывов на сервер */\r\nfunction onClickSubmitNewComment() {\r\n    let addNewComment = document.querySelector('#add_new_comment');\r\n    let newComment = document.querySelector('#new_comment');\r\n    addNewComment.addEventListener('submit', (event) => {\r\n        event.preventDefault();\r\n        // Если отзыв написан\r\n        if (newComment.value !== '') {\r\n            // то отправляем новый отзыв на сервер\r\n            sendNewComment(newComment.value, lastCommentNumber);\r\n            // Очищаем поле ввода\r\n            newComment.value = '';\r\n        }\r\n    });\r\n}\r\n/** Получает с сервера все отзывы и отображает их */\r\nfunction getComments() {\r\n    // Загружаем отзывы\r\n    $.ajax({\r\n        url: `${SERVER_URL}/comments`,\r\n        dataType: 'json',\r\n        success: (data, testStatus) => {\r\n            try {\r\n                // Бросаем исключение, если загрузка не удалась\r\n                if (testStatus != 'success') throw new Error('Отзывы с сервера не получены из-за ошибки связи');\r\n                // Отображаем отзывы\r\n                showComments(data);\r\n            }\r\n            catch (e) {\r\n                // выводим сообщение об ошибке\r\n                console.error(e.message);\r\n                $('<div>').text(e.status + ' ' + e.statusText).dialog({title:'Ошибка связи'});\r\n            }\r\n        },\r\n        error: error => {\r\n            console.error(`${error.status} ${error.responseJSON.message}`);\r\n            $('<div>').text(error.status + ' ' + error.responseJSON.message).dialog({title:'Ошибка связи'});\r\n        }\r\n    });\r\n}\r\n/** Отображает отзывы\r\n * @param commentsData {Object} json-данные отзывов */\r\nfunction showComments(commentsData) {\r\n    if (commentsData.length == 0) {\r\n        $('#cart').text('Отзывы о магазине отсутствуют. Пожалуйста, оставьте Ваш отзыв.');\r\n    } else {\r\n        let comments = `<h4>Отзывы покупателей о нас:</h4>`;\r\n        for (let i = 0; i < commentsData.length; i++) {\r\n            comments += `<div class=\"card comments\" id=\"comment${i}\"><div class=\"card-body\"><p class=\"card-text user\">Номер отзыва: ${commentsData[i].comment_id}</p><p class=\"card-text title\">Содержание отзыва:</p><p class=\"card-text message\">${commentsData[i].text}</p><p class=\"card-text like\">Оценка отзыва: <span id=\"likes${i}\">${commentsData[i].likes}</span></p><a href=\"#\" class=\"btn\" id=\"delete${i}\">Удалить отзыв</a><a href=\"#\" class=\"btn\" id=\"like${i}\">Мне нравится</a></div></div>`;\r\n        }\r\n        $('#company').append(comments);\r\n        // Сохраняем номер последнего оображенного отзыва\r\n        lastCommentNumber = commentsData.length;\r\n        for (let i = 0; i < commentsData.length; i++) {\r\n            $(`#delete${i}`).click(commentsData[i], (eventObject) => {\r\n                // отключаем переход по ссылке\r\n                eventObject.preventDefault();\r\n                // Удаляем отзыв по щелчку на кнопку \"Удалить отзыв\"\r\n                onClickDeleteComment(eventObject.data.comment_id, i);\r\n            });\r\n            $(`#like${i}`).click(commentsData[i], (eventObject) => {\r\n                // отключаем переход по ссылке\r\n                eventObject.preventDefault();\r\n                // Повышаем оценку отзыва по щелчку на кнопку \"Мне нравится\"\r\n                onClickLikeComment(eventObject.data.comment_id, i);\r\n            });\r\n        }\r\n    }\r\n}\r\n/** Удаляет отзыв по щелчку на кнопку \"Удалить отзыв\"\r\n * @param commentID {String} id отзыва */\r\nfunction onClickDeleteComment(commentID, commentNumber) {\r\n    $.ajax({\r\n        url: `${SERVER_URL}/comments?comment_id=${commentID}`,\r\n        type: 'delete',\r\n        dataType: 'json',\r\n        success: (data, testStatus) => {\r\n            try {\r\n                // Бросаем исключение, если загрузка не удалась\r\n                if (testStatus != 'success') throw new Error('Отзыв не удален из-за ошибки связи');\r\n                // Скрываем отзыв со страницы отзывов\r\n                hideComment(commentNumber);\r\n            }\r\n            catch (e) {\r\n                // выводим сообщение об ошибке\r\n                console.error(e.message);\r\n                $('<div>').text(e.status + ' ' + e.responseJSON.message).dialog({title:'Ошибка связи'});\r\n            }\r\n        },\r\n        error: error => {\r\n            console.error(`${error.status} ${error.responseJSON.message}`);\r\n            $('<div>').text(error.status + ' ' + error.responseJSON.message).dialog({title:'Ошибка связи'});\r\n        }\r\n    });\r\n}\r\n/** Скрывает отзыв на странице отзывов\r\n * @param commentNumber {Number} номер отзыва на странице */\r\nfunction hideComment(commentNumber) {\r\n    $(`#comment${commentNumber}`).hide();\r\n}\r\n/** Повышает оценку отзыва\r\n * @param commentID {String} id отзыва\r\n * @param commentNumber {Number} номер отзыва на странице */\r\nfunction onClickLikeComment(commentID, commentNumber) {\r\n    $.ajax({\r\n        url: `${SERVER_URL}/comments?comment_id=${commentID}`,\r\n        type: 'patch',\r\n        dataType: 'json',\r\n        success: (data, testStatus) => {\r\n            try {\r\n                // Бросаем исключение, если загрузка не удалась\r\n                if (testStatus != 'success') throw new Error('Оценка отзыва не добавлена из-за ошибки связи');\r\n                // Визуализируем новую оценку отзыва на странице отзывов\r\n                showNewLikeForComment(data, commentNumber);\r\n            }\r\n            catch (e) {\r\n                // выводим сообщение об ошибке\r\n                console.error(e.message);\r\n                $('<div>').text(e.status + ' ' + e.responseJSON.message).dialog({title:'Ошибка связи'});\r\n            }\r\n        },\r\n        error: error => {\r\n            console.error(`${error.status} ${error.responseJSON.message}`);\r\n            $('<div>').text(error.status + ' ' + error.responseJSON.message).dialog({title:'Ошибка связи'});\r\n        }\r\n    });\r\n}\r\n/** Визуализирует новую оценку отзыва на странице отзывов\r\n * @param commentData {Object} json-данные отзыва\r\n * @param commentNumber {Number} номер отзыва */\r\nfunction showNewLikeForComment(commentData, commentNumber) {\r\n    $(`#likes${commentNumber}`).html(commentData.likes);\r\n}\r\n/** Добавляет новый отзыв в базу отзывов на сервере\r\n * @param comment {String} текст отзыва */\r\nfunction sendNewComment(comment) {\r\n    $.ajax({\r\n        url: `${SERVER_URL}/comments?text=${comment}`,\r\n        type: 'post',\r\n        dataType: 'json',\r\n        success: (data, testStatus) => {\r\n            try {\r\n                // Бросаем исключение, если загрузка не удалась\r\n                if (testStatus != 'success') throw new Error('Отзыв не добавлен из-за ошибки связи');\r\n                // Визуализирует новый отзыв на странице отзывов\r\n                showNewComment(data);\r\n            }\r\n            catch (e) {\r\n                // выводим сообщение об ошибке\r\n                console.error(e.message);\r\n                $('<div>').text(e.status + ' ' + e.responseJSON.message).dialog({title:'Ошибка связи'});\r\n            }\r\n        },\r\n        error: error => {\r\n            console.error(`${error.status} ${error.responseJSON.message}`);\r\n            $('<div>').text(error.status + ' ' + error.responseJSON.message).dialog({title:'Ошибка связи'});\r\n        }\r\n    });\r\n}\r\n/** Визуализирует новый отзыв на странице\r\n * @param commentData {Object} полученные с сервера json-данные нового отзыва */\r\nfunction showNewComment(commentData) {\r\n    // Сохраняем номер отзыва\r\n    let commentNumber = lastCommentNumber;\r\n    $('#company').append(`<div class=\"card comments\" id=\"comment${commentNumber}\"><div class=\"card-body\"><p class=\"card-text user\">Номер отзыва: ${commentData.comment_id}</p><p class=\"card-text title\">Содержание отзыва:</p><p class=\"card-text message\">${commentData.text}</p><p class=\"card-text like\">Оценка отзыва: <span id=\"likes${commentNumber}\">${commentData.likes}</span></p><a href=\"#\" class=\"btn\" id=\"delete${commentNumber}\">Удалить отзыв</a><a href=\"#\" class=\"btn\" id=\"like${commentNumber}\">Мне нравится</a></div></div>`);\r\n    // Добавляем обработчики кнопок удаления и оценки для нового отзыва\r\n    $(`#delete${commentNumber}`).click(commentData, (eventObject) => {\r\n        // отключаем переход по ссылке\r\n        eventObject.preventDefault();\r\n        // Удаляем отзыв по щелчку на кнопку \"Удалить отзыв\"\r\n        onClickDeleteComment(eventObject.data.comment_id, commentNumber);\r\n    });\r\n    $(`#like${commentNumber}`).click(commentData, (eventObject) => {\r\n        // отключаем переход по ссылке\r\n        eventObject.preventDefault();\r\n        // Повышаем оценку отзыва по щелчку на кнопку \"Мне нравится\"\r\n        onClickLikeComment(eventObject.data.comment_id, commentNumber);\r\n    });\r\n    // Увеличиваем номер последнего визуализируемого отзыва\r\n    lastCommentNumber++;\r\n}\r\n/** Загружает с сервера данные корзины, затем отображает корзину или создает новую корзину\r\n * @param consumerID {String} id покупателя */\r\nfunction getBasket(consumerID) {\r\n    // Загружаем корзину\r\n    $.ajax({\r\n        url: `${SERVER_URL}/shop`,\r\n        data: {'user_id': consumerID},\r\n        dataType: 'json',\r\n        success: (data, testStatus) => {\r\n            try {\r\n                // Бросаем исключение, если загрузка не удалась\r\n                if (testStatus != 'success') throw new Error('Содержимое корзины с сервера не получено из-за ошибки связи');\r\n                // Отображаем содержимое корзины\r\n                showBasket(data);\r\n            }\r\n            catch (e) {\r\n                // выводим сообщение об ошибке\r\n                console.error(e.message);\r\n                $('<div>').text(e.status + ' ' + e.responseJSON.message).dialog({title:'Ошибка связи'});\r\n            }\r\n        },\r\n        error: error => {\r\n            console.error(`${error.status} ${error.responseJSON.message}`);\r\n            $(\"<div>\").text(error.status + \" \" + error.responseJSON.message).dialog({title:\"Ошибка связи\"});\r\n        }\r\n    });\r\n}\r\n/** Отображает содержимое корзины\r\n * @param basketData {Object} json-данные содержимого корзины */\r\nfunction showBasket(basketData) {\r\n    if (basketData.cart.length == 0) {\r\n        $(\"#cart\").text(\"Товары в корзине отсутствуют. Перейдите в каталог сайта, чтобы выбрать нужные Вам товары\");\r\n    } else {\r\n        let basket = `<p>Имя покупателя: ${basketData.user_id}</p><p>Состав корзины:</p>`;\r\n        // Общая стоимость товаров в корзине\r\n        let value = 0;\r\n        for (let i = 0; i < basketData.cart.length; i++) {\r\n            // Визуализируем каждый товар в корзине\r\n            basket += `<div class=\"card automobile\"><div class=\"card-body\"><p class=\"card-text\">${i+1}) Наименование: ${basketData.cart[i].product}</p><p class=\"card-text\">Цена: ${basketData.cart[i].price}</p><a href=\"#\" class=\"btn\" id=\"item${i}\">Удалить товар из корзины</a></div></div>`;\r\n            // Определяем общую стоимость товаров в корзине\r\n            value += Number(basketData.cart[i].price);\r\n        }\r\n        // Визуализируем общую стоимость товаров в корзине\r\n        basket += `<p>Общая стоимость товаров в корзине: ${value} рублей.</p>`;\r\n        // Визуализируем содержимое корзины на странице\r\n        $(\"#cart\").html(basket);\r\n        // Добавляем кнопки удаления товара из корзины для каждого товара в корзине\r\n        for (let i = 0; i < basketData.cart.length; i++) {\r\n            $(`#item${i}`).click(basketData.cart[i], (eventObject) => {\r\n                // отключаем переход по ссылке\r\n                eventObject.preventDefault();\r\n                onClickDeleteItemFromBasket(eventObject.data.product_id);\r\n            });\r\n        }\r\n    }\r\n}\r\n/** Добавляет товар в корзину\r\n * @param item {String} товар, добавляемый в корзину\r\n * @param price {Price} цена товара, добавляемого в корзину */\r\nfunction onClickAddItemToBasket(item, price) {\r\n    $.ajax({\r\n        url: `${SERVER_URL}/shop?user_id=${userID}&product=${item}&price=${price}`,\r\n        type: \"post\",\r\n        dataType: \"json\",\r\n        success: (data, testStatus) => {\r\n            try {\r\n                // Бросаем исключение, если загрузка не удалась\r\n                if (testStatus != \"success\") throw new Error(\"Товар в корзину не добавлен из-за ошибки связи\");\r\n            }\r\n            catch (e) {\r\n                // выводим сообщение об ошибке\r\n                console.error(e.message);\r\n                $(\"<div>\").text(e.status + \" \" + e.responseJSON.messag).dialog({title:\"Ошибка связи\"});\r\n            }\r\n        },\r\n        error: error => {\r\n            console.error(`${error.status} ${error.responseJSON.message}`);\r\n            $(\"<div>\").text(error.status + \" \" + error.responseJSON.messag).dialog({title:\"Ошибка связи\"});\r\n        }\r\n    });\r\n}\r\n/** Удаляет товар из корзины\r\n * @param productID id удаляемого товара */\r\nfunction onClickDeleteItemFromBasket(productID) {\r\n    $.ajax({\r\n        url: `${SERVER_URL}/shop?user_id=${userID}&product_id=${productID}`,\r\n        type: \"delete\",\r\n        dataType: \"json\",\r\n        success: (data, testStatus) => {\r\n            try {\r\n                // Бросаем исключение, если загрузка не удалась\r\n                if (testStatus != \"success\") throw new Error(\"Товар из корзины не удален из-за ошибки связи\");\r\n                // Обтображаем содержимое корзины после удаления товара\r\n                showBasket(data);\r\n            }\r\n            catch (e) {\r\n                // выводим сообщение об ошибке\r\n                console.error(e.message);\r\n                $(\"<div>\").text(e.status + \" \" + e.responseJSON.message).dialog({title:\"Ошибка связи\"});\r\n            }\r\n        },\r\n        error: error => {\r\n            console.error(`${error.status} ${error.responseJSON.message}`);\r\n            $(\"<div>\").text(error.status + \" \" + error.responseJSON.message).dialog({title:\"Ошибка связи\"});\r\n        }\r\n    });\r\n}\r\n(function($){\r\n    /** Добавляет метод Carousel (карусель) классу jQuery\r\n     * @param options {Object} содержит пользовательские настройки\r\n     * @return {Object} для цепочек методов */\r\n    $.fn.Carousel = function(options) {\r\n        // задаем параметры карусели по-умолчанию\r\n        let settings = {\r\n            visible: 3,  //количество отображаемых позиций 3\r\n            rotateBy: 1, //прокручивать по 1\r\n            speed: 1000, //скорость 1 секунда\r\n            btnNext: null, // кнопка вперед не назначена\r\n            btnPrev: null, // кнопка назад не назначена\r\n            auto: true, // авто прокрутка включена\r\n            margin: 10,    // отступ между позициями\r\n            position: \"h\",// расположение по горизонтали\r\n            dirAutoSlide: false //направление движения вперед для автопрокрутки\r\n        };\r\n        // возвращаем объект для использования в цепочках методов\r\n        return this.each(function() {\r\n            if (options) {\r\n                // устанавливаем пользовательские настройки\r\n                $.extend(settings, options);\r\n            }\r\n            let $this = $(this);//родительский элемент (Блок в котором находится карусель)\r\n            let $carousel = $this.children(\":first\");// получаем дочерний элемент (UL) т.е. саму карусель\r\n            let itemWidth = $carousel.children().outerWidth()+settings.margin; // вычисляем ширину элемента\r\n            let itemHeight = $carousel.children().outerHeight()+settings.margin;// вычисляем высоту элемента\r\n            let itemsTotal = $carousel.children().length; // получаем общее количество элементов в каруселе\r\n            let running = false; //останавливаем процесс\r\n            let intID = null; //очищаем интервал\r\n            //size - размер для вычисления длины, зависит от ориентации карусели\r\n            let size = itemWidth;\r\n            if(settings.position==\"v\") size = itemHeight;\r\n            //Если карусель вертикальная то\r\n            if(settings.position==\"v\")\r\n                $this.css({\r\n                    \"position\": \"relative\", // необходимо для нормального отображения в IE6-7\r\n                    \"overflow\": \"hidden\", // прячем все, что не влезает в контейнер\r\n                    \"height\": settings.visible * size + \"px\" ,// ставим длину контейнера равной ширине всех видимых элементов\r\n                    \"width\": itemWidth-settings.margin // ширина контейнера равна ширине элемента\r\n                });\r\n            else\r\n                $this.css({\r\n                    \"position\": \"relative\", // необходимо для нормального отображения в IE6-7\r\n                    \"overflow\": \"hidden\", // прячем все, что не влезает в контейнер\r\n                    \"width\": settings.visible * size + \"px\" ,// ширину контейнера ставим равной ширине всех видимых элементов\r\n                    \"height\": itemHeight-settings.margin\r\n                });\r\n            //вычисляем расстояние отступа от каждого элемента\r\n            if(settings.position==\"v\")\r\n                $carousel.children(\"li\").css({\r\n                    \"margin-top\": settings.margin/2+ \"px\",\r\n                    \"margin-bottom\": settings.margin/2+ \"px\",\r\n                    \"float\": \"left\",\r\n                    \"width\": \"60px\",\r\n                    \"height\": \"40px\"\r\n                });\r\n            else\r\n                $carousel.children(\"li\").css({\r\n                    \"margin-left\": settings.margin/2+ \"px\",\r\n                    \"margin-right\": settings.margin/2+ \"px\",\r\n                });\r\n            // в зависимости от ориентации, увеличиваем длину или ширину карусели\r\n            if(settings.position==\"v\")\r\n                $carousel.css({\r\n                    \"position\": \"relative\", // разрешаем сдвиг по оси\r\n                    \"height\": 9999 + \"px\", // увеличиваем длину карусели\r\n                    \"left\": 0,\r\n                    \"top\": 0\r\n                });\r\n            else\r\n                $carousel.css({\r\n                    \"position\": \"relative\", // разрешаем сдвиг по оси\r\n                    \"width\": 9999 + \"px\", // увеличиваем лену карусели\r\n                    \"top\": 0,\r\n                    \"left\": 0\r\n                });\r\n            // прокрутка карусели в наравлении dir [true-вперед; false-назад]\r\n            function slide(dir) {\r\n                let direction = !dir ? -1 : 1; // устанавливаем заданное направление\r\n                let Indent = 0; // смещение (для ul)\r\n                if (!running) {\r\n                // если анимация завершена (или еще не запущена)\r\n                    running = true; // ставим флаг, что анимация в процессе\r\n                    if (intID) { // если запущен интервал\r\n                        window.clearInterval(intID); // очищаем интервал\r\n                    }\r\n                    if (!dir) { // если мы мотаем к следующему элементу (так по умолчанию)\r\n                        /*\r\n                          * вставляем после последнего элемента карусели\r\n                          * клоны стольких элементов, сколько задано\r\n                          * в параметре rotateBy (по умолчанию задан один элемент)\r\n                        */\r\n                        $carousel.children(\":last\").after($carousel.children().slice(0,settings.rotateBy).clone(true));\r\n                    } else { // если мотаем к предыдущему элементу\r\n                        /*\r\n                           * вставляем перед первым элементом карусели\r\n                           * клоны стольких элементов, сколько задано\r\n                           * в параметре rotateBy (по умолчанию задан один элемент)\r\n                        */\r\n                        $carousel.children(\":first\").before($carousel.children().slice(itemsTotal - settings.rotateBy, itemsTotal).clone(true));\r\n                        /*\r\n                         * сдвигаем карусель (<ul>)  на ширину/высоту  элемента,\r\n                         * умноженную на количество элементов, заданных\r\n                         * в параметре rotateBy (по умолчанию задан один элемент)\r\n                        */\r\n                        if(settings.position==\"v\")\r\n                            $carousel.css(\"top\", -size * settings.rotateBy + \"px\");\r\n                        else\r\n                            $carousel.css(\"left\", -size * settings.rotateBy + \"px\");\r\n                    }\r\n\r\n                    /*\r\n                     * расчитываем  смещение\r\n                     * текущее значение  + ширина/высота  одного элемента * количество проматываемых элементов * на направление перемещения (1 или -1)\r\n                      */\r\n                    if(settings.position==\"v\")\r\n                        Indent = parseInt($carousel.css(\"top\")) + (size * settings.rotateBy * direction);\r\n                    else\r\n                        Indent = parseInt($carousel.css(\"left\")) + (size * settings.rotateBy * direction);\r\n\r\n                    if(settings.position==\"v\")\r\n                        var animate_data = {\"top\": Indent};\r\n                    else\r\n                        var animate_data = {\"left\": Indent};\r\n                    // запускаем анимацию\r\n                    $carousel.animate(animate_data, {queue: false, duration: settings.speed, complete: function() {\r\n                            // когда анимация закончена\r\n                            if (!dir) { // если мы мотаем к следующему элементу (так по умолчанию)\r\n                                // удаляем столько первых элементов, сколько задано в rotateBy\r\n                                $carousel.children().slice(0, settings.rotateBy).remove();\r\n                                // устанавливаем сдвиг в ноль\r\n                                if (settings.position == \"v\")\r\n                                    $carousel.css(\"top\", 0);\r\n                                else\r\n                                    $carousel.css(\"left\", 0);\r\n                            } else { // если мотаем к предыдущему элементу\r\n                                // удаляем столько последних элементов, сколько задано в rotateBy\r\n                                $carousel.children().slice(itemsTotal, itemsTotal + settings.rotateBy).remove();\r\n                            }\r\n                            if (settings.auto) { // если карусель должна проматываться автоматически\r\n                                // запускаем вызов функции через интервал времени (auto)\r\n                                intID = window.setInterval(function() { slide(settings.dirAutoSlide); }, settings.auto);\r\n                            }\r\n                            running = false; // отмечаем, что анимация завершена\r\n                        }});\r\n                }\r\n                return false; // возвращаем false для того, чтобы не было перехода по ссылке\r\n            }\r\n            // назначаем обработчик на событие click для кнопки \"вперед\"\r\n            $(settings.btnNext).click(function() {\r\n                return slide(false);\r\n            });\r\n            // назначаем обработчик на событие click для кнопки \"Назад\"\r\n            $(settings.btnPrev).click(function() {\r\n                return slide(true);\r\n            });\r\n\r\n            if (settings.auto) { // если карусель должна проматываться автоматически\r\n                // запускаем вызов функции через временной интервал\r\n                intID = window.setInterval(function() { slide(settings.dirAutoSlide); }, settings.auto);\r\n            }\r\n        });\r\n    };\r\n})(jQuery);\r\n/** Создает карусель на странице */\r\nfunction createCarousel() {\r\n    $(\".popular_goods\").Carousel({\r\n        visible: 2,\r\n        rotateBy: 1,\r\n        speed: 5000,\r\n        btnNext: \"#next\",\r\n        btnPrev: \"#prev\",\r\n        auto: true,\r\n        backslide: true,\r\n        margin: 5\r\n    });\r\n}\r\n// Дожидаемся загрузки страницы\r\ndocument.addEventListener(\"DOMContentLoaded\", function() {\r\n    // Создаем элементы, отображаемые на каждой странице\r\n    pageTemplate();\r\n    // Создаем форму с каталогом автомобилей\r\n    createCatalog();\r\n    // Добавляем управление для вкладок раздела Промоакции\r\n    tabControls();\r\n    // Работаем с регулярными выражениями\r\n    regExpOutput();\r\n    // Создаем фотогалерею\r\n    createGallery();\r\n    // Создаем форму обратной связи\r\n    createForm();\r\n});"]}